scale_fill_manual(values=c("lightskyblue", "salmon"))+
coord_flip()
anes_saver=anes_use%>%
mutate(saver=as_factor(VCF9205))%>%
filter(year %in% c(2004,2008))%>%
filter(!is.na(saver))
temp<-anes_saver%>%
group_by(year,saver)%>%
count(vote)%>%
mutate(prop=n/sum(n))
ggplot(temp,
aes(x=year, y=prop, fill=vote)) +
geom_bar(stat="identity", colour="black") + theme_bw()+
facet_wrap(~saver, ncol=1)
anes_saver=anes_use%>%
mutate(saver=as_factor(VCF9205))%>%
filter(year %in% c(2004,2008))%>%
filter(!is.na(saver))
temp<-anes_saver%>%
group_by(year,vote)%>%
count(saver)%>%
mutate(prop=n/sum(n))
ggplot(temp,
aes(x=year, y=prop, fill=saver)) +
geom_bar(stat="identity", colour="black") + theme_bw()+
facet_wrap(~vote, ncol=1)
anes_=anes_use%>%
mutate(ll=as_factor(VCF0894))%>%
filter(year %in% c(2004,2008))%>%
filter(!is.na(ll))
temp<-anes_%>%
group_by(year,ll)%>%
count(vote)%>%
mutate(prop=n/sum(n))
ggplot(temp,
aes(x=year, y=prop, fill=vote)) +
geom_bar(stat="identity", colour="black") + theme_bw()+
facet_wrap(~ll, ncol=1)+coord_flip()
anes_use%>%filter(year==2008)%>%select(VCF0424)
barplot(table(anes$VCF0004),
las=2,
main="number of respondents over the years")
barplot(table(anes$VCF0004),
main="number of respondents over the years")
barplot(table(anes$VCF0004),
main="number of respondents over the years")
ggplot(anes,aes(x=year,y=VCF0004))+geom_bar()
barplot(table(anes$VCF0004),
main="number of respondents over the years")
ggplot(anes,aes(x=year,y=VCF0004))+geom_bar()
barplot(table(anes$VCF0004),
main="number of respondents over the years")
ggplot(anes,aes(VCF0004))+geom_bar()
anes$VCF0004
barplot(table(anes$VCF0004),
main="number of respondents over the years")
ggplot(anes,aes(VCF0004))+geom_bar()
barplot(table(anes$VCF0004),
main="number of respondents over the years")
barplot(table(anes$VCF0004),
las=2,
main="number of respondents over the years")
barplot(table(anes$VCF0004),
main="number of respondents over the years")
#what are the working status in 2004 and 2008
anes_unemp<-anes_work%>%
filter(work="4. Unemployed")
#what are the working status in 2004 and 2008
anes_unemp<-anes_work%>%
filter(work=="4. Unemployed")
group_by(year)%>%
count(work)%>%
mutate(prop=n/sum(n))
#what are the working status in 2004 and 2008
anes_unemp<-anes_work%>%
filter(work=="4. Unemployed")%>%
group_by(year)%>%
count(work)%>%
mutate(prop=n/sum(n))
save(anes_workstatus, file="../output/data_use.RData")
#visualize
ggplot(anes_unemp,
aes(x=year, y=prop, fill=work))+
geom_bar(stat="identity", colour="black") + theme_bw()
#what are the working status in 2004 and 2008
anes_unemp<-anes_work%>%
filter(work=="4. Unemployed")%>%
group_by(year)%>%
count(work)%>%
mutate(prop=n/sum(n))
save(anes_workstatus, file="../output/data_use.RData")
#visualize
ggplot(anes_unemp,
aes(x=year, y=prop, fill=work))+
geom_bar(stat="identity", colour="black") + theme_bw()
#what are the working status in 2004 and 2008
anes_unemp<-anes_work%>%
filter(work=="4. Unemployed")%>%
group_by(year)%>%
count(work)%>%
mutate(prop=n/sum(n))
#save(anes_workstatus, file="../output/data_use.RData")
#visualize
ggplot(anes_unemp,
aes(x=year, y=prop, fill=work))+
geom_bar(stat="identity", colour="black") + theme_bw()
anes_work%>%
filter(work=="4. Unemployed")%>%
group_by(year)%>%
count(work)%>%
anes_work%>%
filter(work=="4. Unemployed")%>%
group_by(year)%>%
count(work)
#converting labelled variables VCF0116 and VCF0155 to factors, filter nonNA responses in 2004 and 2008
anes_work=anes_use%>%
mutate(work=as_factor(VCF0116),
worry=as_factor(VCF0155))%>%
filter(year %in% c(2004,2008))%>%
filter(!is.na(work) & !is.na(worry))
save(anes_work, file="../output/data_use.RData")
anes_work%>%
filter(work=="4. Unemployed")%>%
group_by(year)%>%
count(work)%>%
mutate(prop=n/sum(n))
anes_work%>%
filter(work=="4. Unemployed")%>%
group_by(year, vote)%>%
count(work)%>%
mutate(prop=n/sum(n))
anes_work%>%
filter(work=="4. Unemployed")%>%
group_by(work)%>%
count(vote)%>%
mutate(prop=n/sum(n))
anes_work%>%
filter(work=="4. Unemployed")%>%
group_by(work,year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
#what are the working status in 2004 and 2008
anes_unemp<-anes_work%>%
filter(work=="4. Unemployed")%>%
group_by(work,year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
#save(anes_workstatus, file="../output/data_use.RData")
#visualize
ggplot(anes_unemp,
aes(x=year, y=prop, fill=work))+
geom_bar(stat="identity", colour="black") + theme_bw()
ggplot(anes_unemp,
aes(x=year, y=prop, fill=work))+
geom_bar(stat="identity", colour="black") + theme_bw()
ggplot(anes_unemp,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") + theme_bw()
anes_unemp<-anes_work%>%
filter(work!="1. Working now")%>%
group_by(work,year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
#save(anes_workstatus, file="../output/data_use.RData")
#visualize
ggplot(anes_unemp,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") + theme_bw()
anes_unemp<-anes_work%>%
filter(work!="1. Working now")%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
#save(anes_workstatus, file="../output/data_use.RData")
#visualize
ggplot(anes_unemp,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") + theme_bw()
anes_unemp
#what are the working status in 2004 and 2008
anes_unemp<-anes_work%>%
filter(work!="1. Working now")%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
#save(anes_workstatus, file="../output/data_use.RData")
#visualize
ggplot(anes_unemp,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") + theme_bw()
#what are the working status in 2004 and 2008
anes_unemp<-anes_work%>%
filter(work!="1. Working now")%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
#save(anes_workstatus, file="../output/data_use.RData")
#visualize
ggplot(anes_unemp,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") + theme_bw()
#filter out respondents who are working now, to see the voting proportions each year
anes_unemp<-anes_work%>%
filter(work!="1. Working now")%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
save(anes_unemp, file="../output/data_use.RData")
#visualize
ggplot(anes_unemp,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") + theme_bw()
#filter out respondents who are working now, to see the voting proportions each year
anes_unemp<-anes_work%>%
filter(work!="1. Working now")%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
save(anes_unemp, file="../output/data_use.RData")
#visualize
ggplot(anes_unemp,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") + theme_bw()
#what are the working status in 2004 and 2008
anes_workstatus<-anes_work%>%
group_by(year)%>%
count(work)%>%
mutate(prop=n/sum(n))
save(anes_workstatus, file="../output/data_use.RData")
#visualize
ggplot(anes_workstatus,
aes(x=year, y=prop, fill=work))+
geom_bar(stat="identity", colour="black") + theme_bw()
#what are the working status in 2004 and 2008
anes_workstatus<-anes_work%>%
group_by(year)%>%
count(work)%>%
mutate(prop=n/sum(n))
save(anes_workstatus, file="../output/data_use.RData")
#visualize
ggplot(anes_workstatus,
aes(x=year, y=prop, fill=work))+
geom_bar(stat="identity", colour="black") + theme_bw()
anes_temp<-anes_work%>%
filter(worry!="5. Not much at all")%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
#save(anes_unemp, file="../output/data_use.RData")
#visualize
ggplot(anes_temp,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") + theme_bw()
anes_workstatus<-anes_work%>%
group_by(year)%>%
count(work)%>%
mutate(prop=n/sum(n))
save(anes_workstatus, file="../output/data_use.RData")
#visualize
ggplot(anes_workstatus,
aes(x=year, y=prop, fill=work))+
geom_bar(stat="identity", colour="black")
#filter out respondents who are working now, to see the voting proportions each year
anes_unemp<-anes_work%>%
filter(work!="1. Working now")%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
save(anes_unemp, file="../output/data_use.RData")
#visualize
ggplot(anes_unemp,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") +
scale_fill_manual(values=c("lightskyblue", "salmon"))+
theme_bw()
anes_unemp<-anes_work%>%
filter(work!="1. Working now")%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
save(anes_unemp, file="../output/data_use.RData")
#visualize
ggplot(anes_unemp,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") +
scale_fill_manual(values=c("lightskyblue", "salmon"))+
theme_bw()
anes_temp<-anes_work%>%
filter(worry!="5. Not much at all")%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
#save(anes_unemp, file="../output/data_use.RData")
#visualize
ggplot(anes_temp,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") +
scale_fill_manual(values=c("lightskyblue", "salmon"))+
theme_bw()
ggplot(anes_vote, aes(x=year, y=prop, fill=vote)) +
geom_bar(stat="identity",colour="black")+
scale_fill_manual(values=c("lightskyblue", "salmon"))+
labs(title="What party did the respondents vote for in the elections over the years?")+
theme_bw()
#specific proportions
anes_vote%>%filter(year==2004 | year==2008)
ggplot(anes_party,
aes(x=year, y=prop, fill=vote)) +
geom_bar(stat="identity", colour="black") + theme_bw()+
facet_wrap(~party, ncol=1)+
scale_fill_manual(values=c("lightskyblue", "salmon"))+
coord_flip()+
theme(axis.text.x = element_text(angle = 90))+
theme_bw()+
labs(title="What party did respondents with different partisanship vote for?")
anes_worry<-anes_work%>%
filter(worry!="5. Not much at all")%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
save(anes_worry, file="../output/data_use.RData")
#visualize
ggplot(anes_worry,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") +
scale_fill_manual(values=c("lightskyblue", "salmon"))+
theme_bw()
anes_worrytatus<-anes_work%>%
group_by(year)%>%
count(worry)%>%
mutate(prop=n/sum(n))
save(anes_worrytatus, file="../output/data_use.RData")
#visualize
ggplot(anes_worrytatus,
aes(x=year, y=prop, fill=worry))+
geom_bar(stat="identity", colour="black")+
theme_bw()+
labs(title="What worry status did respondents have?")
#filter out respondents who are somewhat/lot worried, to see the voting proportions each year
anes_worry<-anes_work%>%
filter(worry!="5. Not much at all")%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
save(anes_worry, file="../output/data_use.RData")
#visualize
ggplot(anes_worry,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") +
scale_fill_manual(values=c("lightskyblue", "salmon"))+
theme_bw()+
labs(title="What party did some/a lot worried respondents vote for?")
knitr::opts_chunk$set(echo = TRUE,warning = FALSE, message = FALSE)
packages.used<-as.list(
c("tidyverse",
"haven",
"ggplot2"))
check.pkg<-function(x){
if(!require(x,character.only=T))
install.packages(x,character.only=T,dependence=T)}
#check if packages needed are installed
lapply(packages.used, check.pkg)
#load packages
library(tidyverse)
library(haven)
library(ggplot2)
#Import data
anes<-read_sav("../data/anes_timeseries_cdf.sav")
#years that surveys conducted
Election_years=as.character(seq(1952, 2016, 4))
#converting labelled data to factor, filter nonNA votes for Democrat and Republican
anes_use=anes%>%
mutate(year=as_factor(VCF0004),
vote=as_factor(VCF0704))%>%
filter(year %in% Election_years)%>%
filter(!is.na(vote))%>%
filter((vote=="1. Democrat") | (vote=="2. Republican"))
save(anes_use, file="../output/data_use.RData")
#get the proportion of votes for each party every year
anes_vote<-anes_use%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
save(anes_vote, file="../output/data_use.RData")
#represent data in a barplot
ggplot(anes_vote, aes(x=year, y=prop, fill=vote)) +
geom_bar(stat="identity",colour="black")+
scale_fill_manual(values=c("lightskyblue", "salmon"))+
labs(title="What party did the respondents vote for in the elections over the years?")+
theme_bw()
#specific proportions
anes_vote%>%filter(year==2004 | year==2008)
#converting labelled variable VCF0301 to factor, filter nonNA responses in 2004 and 2008
anes_party<-anes_use%>%
mutate(party=as_factor(VCF0301))%>%
filter(year %in% c(2004,2008))%>%
filter(!is.na(party))
#each year, for each of the seven party-identification categories, get the proportion of the vote for 2 parites
anes_party<-anes_party%>%
group_by(year,party)%>%
count(vote)%>%
mutate(prop=n/sum(n))
save(anes_party, file="../output/data_use.RData")
#visualize the proportion
ggplot(anes_party,
aes(x=year, y=prop, fill=vote)) +
geom_bar(stat="identity", colour="black") + theme_bw()+
facet_wrap(~party, ncol=1)+
scale_fill_manual(values=c("lightskyblue", "salmon"))+
coord_flip()+
theme(axis.text.x = element_text(angle = 90))+
theme_bw()+
labs(title="What party did respondents with different partisanship vote for?")
#converting labelled variables VCF0116 and VCF0155 to factors, filter nonNA responses in 2004 and 2008
anes_work=anes_use%>%
mutate(work=as_factor(VCF0116),
worry=as_factor(VCF0155))%>%
filter(year %in% c(2004,2008))%>%
filter(!is.na(work) & !is.na(worry))
save(anes_work, file="../output/data_use.RData")
#what are the working status in 2004 and 2008
anes_workstatus<-anes_work%>%
group_by(year)%>%
count(work)%>%
mutate(prop=n/sum(n))
save(anes_workstatus, file="../output/data_use.RData")
#visualize
ggplot(anes_workstatus,
aes(x=year, y=prop, fill=work))+
geom_bar(stat="identity", colour="black")+
theme_bw()+
labs(title="What work status did respondents have?")
#filter out respondents who are working now, to see the voting proportions each year
anes_unemp<-anes_work%>%
filter(work!="1. Working now")%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
save(anes_unemp, file="../output/data_use.RData")
#visualize
ggplot(anes_unemp,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") +
scale_fill_manual(values=c("lightskyblue", "salmon"))+
theme_bw()+
labs(title="What party did non-working respondents vote for?")
#what are the working status in 2004 and 2008
anes_worrytatus<-anes_work%>%
group_by(year)%>%
count(worry)%>%
mutate(prop=n/sum(n))
save(anes_worrytatus, file="../output/data_use.RData")
#visualize
ggplot(anes_worrytatus,
aes(x=year, y=prop, fill=worry))+
geom_bar(stat="identity", colour="black")+
theme_bw()+
labs(title="What worry status did respondents have?")
#filter out respondents who are somewhat/lot worried, to see the voting proportions each year
anes_worry<-anes_work%>%
filter(worry!="5. Not much at all")%>%
group_by(year)%>%
count(vote)%>%
mutate(prop=n/sum(n))
save(anes_worry, file="../output/data_use.RData")
#visualize
ggplot(anes_worry,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") +
scale_fill_manual(values=c("lightskyblue", "salmon"))+
theme_bw()+
labs(title="What party did some/a lot worried respondents vote for?")
barplot(table(anes$VCF0004),
main="Number of respondents over the years")
ggplot(anes_vote, aes(x=year, y=prop, fill=vote)) +
geom_bar(stat="identity",colour="black")+
scale_fill_manual(values=c("lightskyblue", "salmon"))+
labs(title="What party did the respondents vote for in the elections over the years?")+
theme_bw()
ggplot(anes_party,
aes(x=year, y=prop, fill=vote)) +
geom_bar(stat="identity", colour="black") + theme_bw()+
facet_wrap(~party, ncol=1)+
scale_fill_manual(values=c("lightskyblue", "salmon"))+
coord_flip()+
theme(axis.text.x = element_text(angle = 90))+
theme_bw()+
labs(title="What party did respondents with different partisanship vote for?")
ggplot(anes_workstatus,
aes(x=year, y=prop, fill=work))+
geom_bar(stat="identity", colour="black")+
theme_bw()+
labs(title="What work status did respondents have?")
ggplot(anes_unemp,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") +
scale_fill_manual(values=c("lightskyblue", "salmon"))+
theme_bw()+
labs(title="What party did non-working respondents vote for?")
ggplot(anes_worrytatus,
aes(x=year, y=prop, fill=worry))+
geom_bar(stat="identity", colour="black")+
theme_bw()+
labs(title="What worry status did respondents have?")
ggplot(anes_worry,
aes(x=year, y=prop, fill=vote))+
geom_bar(stat="identity", colour="black") +
scale_fill_manual(values=c("lightskyblue", "salmon"))+
theme_bw()+
labs(title="What party did some/a lot worried respondents vote for?")
barplot(table(anes$VCF0004),
main="Number of respondents over the years")
